{% extends "pv_home.html" %}
{% load i18n %}

{% block more_scripts %}
<script type='text/javascript'>
	this.selectionChanged = function() {
	$( '#pvsort_select' ).change( function() {
		orderby = $("#pvsort_select option:selected"); 
		window.location.href= '{{url}}?orderby=' + orderby.val();
		});
	};

// starting the script on page load
	$(document).ready(function(){
		selectionChanged();
	});
</script>
{% endblock %}

{% block title %}{% trans "Series" %}{% endblock %}

{% block current_crumb %}{% trans "Series" %}{% endblock %}

{% block main_body %}
<div class="container-fluid">

<div class="row-fluid series">
    <div class="page-header">
        <div class="span4">
            <h2>Series</h2>
        </div>
        <div class="span8 order-series">
            <form class="form-inline">
                <label>Order by &nbsp;</label>
                <select class="span2">
                    <option value="title">Title</option>
                    {% if order == "no_of_artworks" %}
                        <option value="no_of_artworks" selected='true'>Number of Artworks</option>
                    {% else %}
                        <option value="no_of_artworks">Number of Artworks</option>
                    {% endif %}
                </select>
            </form>
        </div>

    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <td>Title</td>
                <td>
                    Number of Artworks
                </td>
            </tr>
        </thead>

        <tbody>
        	{% for serie in series.object_list %}
            <tr>
                <td>
                    <a href="{% url series_record serie.id %}">{{ serie.title }}</a>
                </td>
				<td>
					{{ serie.artwork_set.count }}
				</td>
			</tr>
            {% endfor %}
        </tbody>
    </table>

<!--PAGINATION-->

    <div class="pagination pagination-centered">
        <a id="first" href="?orderby={{ order }}&page=1"><span class="first-last">First</span></a>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    {% if series.has_previous %}
        <a href="?orderby={{ order }}&page={{ series.previous_page_number }}"><span class="badge badge-info">Previous</a>
    {% else %}
        <span class="badge badge-info"> Previous </span>
    {% endif %}
    &nbsp;
        <span class="current">
            Page {{ series.number }} of {{ series.paginator.num_pages }}
        </span>
    &nbsp;
    {% if series.has_next %}
        <a href="?orderby={{ order }}&page={{ series.next_page_number }}"><span class="badge badge-info">Next</span></a>
    {% else %}
        <span class="badge badge-info">Next</span>
    {% endif %}
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <a href="?orderby={{ order }}&page={{ series.paginator.num_pages }}"><span class="first-last">Last</span></a>
    </div>
</div>
{% endblock %}
